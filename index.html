<!DOCTYPE html>
<html>

  <head>
    <meta charset='utf-8' />
    <meta http-equiv="X-UA-Compatible" content="chrome=1" />
    <meta name="description" content="Facebook-datasource-for-cakephp : A DataSource for CakePHP 2.x based on Facebook API" />

    <link rel="stylesheet" type="text/css" media="screen" href="stylesheets/stylesheet.css">

    <title>Facebook Plugin for CakePHP</title>
  </head>

  <body>

    <!-- HEADER -->
    <div id="header_wrap" class="outer">
        <header class="inner">
          <a id="forkme_banner" target="_blank" href="https://github.com/marianofino/Facebook-Plugin-for-CakePHP">View on GitHub</a>

          <h1 id="project_title">Facebook Plugin for CakePHP</h1>
          <h2 id="project_tagline">DataSource and oAuth for CakePHP 2.x based on Facebook API</h2>

            <section id="downloads">
              <a class="zip_download_link" href="https://github.com/marianofino/Facebook-Plugin-for-CakePHP/zipball/master">Download this project as a .zip file</a>
              <a class="tar_download_link" href="https://github.com/marianofino/Facebook-Plugin-for-CakePHP/tarball/master">Download this project as a tar.gz file</a>
            </section>
        </header>
    </div>

    <!-- MAIN CONTENT -->
    <div id="main_content_wrap" class="outer">
      <section id="main_content" class="inner">
        <h3>Installation</h3>
        <div class="step">
        	<strong>Step 1. </strong>Download, unzip and rename the folder to <strong>Facebook</strong> and move it to the Plugin's folder of your CakePHP project.</li>

        	
        </div>
        <div class="step"><strong>Step 2.</strong> In Config/bootstrap.php, enable the plugin and it's bootstrap, by adding a line like this:
        		<pre>CakePlugin::loadAll(
	array('Facebook' => array('bootstrap' => true))
);</pre>
        </div>
        <div class="step">
        	<strong>Step 3.</strong> You <strong>must</strong> have a table for Users and a model, with at least one field for "username". If you don't have one, something like this is fine:
				<p>Table:
				<pre>CREATE TABLE users (
    id INT UNSIGNED AUTO_INCREMENT PRIMARY KEY,
    username VARCHAR(50),
    facebook_id VARCHAR(50)
);</pre>
				</p>
				<p>Model:
				<pre><&#63;php
App::uses('AppModel', 'Model');

class User extends AppModel {
}
&#63;></pre>
				</p>
        </div>
        <div class="step">
        	<strong>Step 4.</strong> Enable Auth component in AppController.php and link it to Facebook Authentication. For example:
        		<pre>public $components = array(
	'Session',
	'Auth' => array(
		'loginAction' => array(
			'plugin' => 'facebook',
			'controller' => 'users',
			'action' => 'login'
		),
		'loginRedirect' => '/',
		'logoutRedirect' => '/',
		'authenticate' => array(
			'all' => array('userModel' => 'User'),
			'Facebook.Oauth'
		)
	)
);</pre>
        </div>
		<div class="step">
			<strong>Step 5.</strong> In Config/database.php, enter the AppKey and AppSecret from your Facebook App, your app complete url, and your login action:
<pre>public $facebook = array(
	'datasource' => 'Facebook.FQL',
	'app_url' => 'http://www.yourdomain.com/path/to/cake', // or just http://www.yourdomain.com if it's on the root
	'app_id' => '35868871xxxxxx',
	'app_secret' => '6059c46e362346xxxxxxxxxxxx'
);</pre>
		</div>

<p>You're ready!! Now proceed with the <a href="#usage">usage section</a>.</p>

<h3 id="usage">Usage</h3>

<p>Here are some examples to learn the basis:</p>

		<div class="step">
			<strong>Example 1.</strong> How to natively login to CakePHP Auth using Facebook:
<pre>

// In the Controller include FacebookHelper
$helpers = array('Facebook.Facebook');

// In the View print the login button
echo $this->Facebook->loginButton();

</pre>
<p>By default, the above example will print a raw link with the label "Login". If you want to customize it, you can by passing some params:</p>
<pre>

// The text of the link
$label = "Facebook Login!";

// The same options as HtmlHelper::link()
$options = array(
	'class' => 'btn_login',
	'id' => 'facebook'
);

// The permissions we need from the user
$permissions = array('email','user_photos');

echo $this->loginButton($label, $options, $permissions);

</pre>
</div>
		<div class="step">
			<strong>Example 2.</strong> Get all the albums from the user:
<pre>

	// In the Controller include the FacebookAlbum model
	public $uses = array('Facebook.FacebookAlbum');
	
	// In the same Controller, in an action
	$albums = $this->FacebookAlbum->find('all', array('fields' => array('FacebookAlbum.name'), 'conditons' => array('owner' => $this->Auth->User('facebook_id'))));

	// In the view from that action
	foreach ($albums as $album) {
		echo $album['FacebookAlbum']['name']."<br />";
	}
	
</pre>
		</div>

<strong>More information</strong>

<p>Some points to take into account:</p>
<ul>
	<li>From the CRUD, only R works. This means that only reads.</li>
	<li>For reading, only supports the method <strong>$model->find('all', $options);</strong></li>
	<li>The models are taken from the <a href="https://developers.facebook.com/docs/reference/fql/" target="_blank">FQL tables</a>. The supported ones are:
		<ul>
			<li>FacebookUser (user)</li>
			<li>FacebookAlbum (album)</li>
			<li>FacebookPage (page)</li>
			<li>FacebookPageAdmin (page_admin)</li>
		</ul>
	</li>
	<li>Models are related using <a href="http://book.cakephp.org/2.0/en/models/associations-linking-models-together.html" target="_blank">CakePHP Model relations</a>.</li>
</ul>

<h3>How to Contribute</h3>

<p>You can contribute by working directly on the core or expanding the supported models.</p>
<p>If you want to contribute please get in touch through the <a href="#comments">support section</a>, by <a href="http://twitter.com/finomdq" target="_blank">twitter</a> or <a href="https://github.com/marianofino/Facebook-Plugin-for-CakePHP" target="_blank">github</a>. Also, you can fix or submit new issues on <a href="https://github.com/marianofino/Facebook-Plugin-for-CakePHP/issues" target="_blank">github</a>.</p>

<h3>Authors and Contributors</h3>

<p>Copyright (c) 2012 - Mariano Finochietto // twitter: <a href="http://twitter.com/finomdq" target="_blank">@finomdq</a> // github: <a href="https://github.com/marianofino" target="_blank">@marianofino</a>.</p> <!-- <a href="https://github.com/mojombo" class="user-mention">@mojombo</a> -->
<p>The Auth component is based on the danielauener's "FacebookAuthenticate". You can find more information here: <a href="https://github.com/danielauener/cake-social-custom-auth" target="_blank">https://github.com/danielauener/cake-social-custom-auth</a></p>

<h3>License</h3>

<p>This software is released under the <a href="http://www.gnu.org/licenses/lgpl-3.0.txt" target="_blank">GNU LGPL License</a>.</p>

<h3 id="comments">Comments &amp; Support</h3>

<div id="disqus_thread"></div>
<script type="text/javascript">
    /* * * CONFIGURATION VARIABLES: EDIT BEFORE PASTING INTO YOUR WEBPAGE * * */
    var disqus_shortname = 'facebookpluginforcakephp'; // required: replace example with your forum shortname

    /* * * DON'T EDIT BELOW THIS LINE * * */
    (function() {
        var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
        dsq.src = 'http://' + disqus_shortname + '.disqus.com/embed.js';
        (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    })();
</script>
<noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
<a href="http://disqus.com" class="dsq-brlink" target="_blank">comments powered by <span class="logo-disqus">Disqus</span></a>
 
      </section>
    </div>
    

    <!-- FOOTER  -->
    <div id="footer_wrap" class="outer">
      <footer class="inner">
        <p class="copyright">Facebook Plugin for CakePHP maintained by <a href="https://github.com/marianofino" target="_blank">marianofino</a></p>
        <p>Published with <a href="http://pages.github.com" target="_blank">GitHub Pages</a></p>
      </footer>
    </div>



  </body>
</html>
